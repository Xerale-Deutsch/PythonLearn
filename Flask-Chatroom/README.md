# 基于SSE的在线聊天

    用Flask、SSE和Redis实现了一个在线聊天室。
    
    由于HTTP请求是无状态的，每次请求完成后，HTTP 连接就断开了，服务器和浏览器互相之间是完全不可知的，只有下一次再发起一次
    请求才能更新相应的信息。应对这种状况，可以简单地让浏览器每隔一个周期就发起一次请求，这样就能在一定程度上模拟实时效果了，
    也就是轮询。
    
    Polling 流程
    
    1. 客户端使用普通的 HTTP 方式向服务器端发送连接请求
    2. 客户端执行网页中的 JavaScript 轮询脚本，定期向服务器发送请求（例如每 5 秒发送一次请求），获取信息
    3. 服务器对每次请求作出响应，并返回相应信息，就像正常的 HTTP 请求一样
    
    但是由于轮训的原理是使浏览器频繁地向服务器发起请求，这在一定程度上会造成性能效率问题。由此又有了长轮询技术，所谓长轮询，
    就是在服务器接收到请求的时候不立即返回，而是只有当有数据变化（或者超时）的时候才返回。这样一来，我们就可以利用一次请求
    最大可能的保持连接的有效性，大大的减少了 Polling 中的请求次数。这个方法叫做长轮询，也叫做 Long-Polling。
    
    Long-Polling 流程
    
    1. 客户端使用普通的 HTTP 方式向服务器端请求网页
    2. 客户端执行网页中的 JavaScript 脚本，向服务器发送数据、请求信息
    3. 服务器并不是立即就对客户端的请求作出响应，而是等待有效的更新
    4. 当信息是有效的更新时，服务器才会把数据推送给客户端
    5. 当客户端接收到服务器的通知时，立即会发送一个新的请求，进入到下一次的轮询
    
    在HTML5之后，又出来了新的方法，就是SSE或WebSocket，在这里，利用的就是SSE来做的这个聊天室。
    
    Server Send Event 流程
    
    1. 客户端使用普通的 HTTP 方式向服务器端请求网页
    2. 客户端执行网页中的 JavaScript 脚本，与服务器之间建立了一个连接
    3. 当服务器端有更新时，会发送一个事件到客户端